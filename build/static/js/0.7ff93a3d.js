webpackJsonp([0],{238:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(5),c=n.n(s),u=n(254),l=n(96),f=n.n(l),p=n(248),h=n(251),b=n(247),m=n(253),d=n(246),y=n.n(d),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={id:e.match.params.title,data:[],textarea:"",babels:[],sure:!1,message:"",toast:!1,danger:!1,origin:[],newOrAdd:!0,size:3,add:[],type:e.match.params.type,score:[!1,!1,!1,!1,!1],sco:0},n}return i(t,e),g(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"wanted"},c.a.createElement("div",{className:y()({toa:!this.state.toast,toastBox:this.state.toast})},c.a.createElement(b.a,{mes:this.state.message,danger:this.state.danger})),this.state.data.map(function(t,n){var r;return c.a.createElement("div",{key:n},c.a.createElement(u.a,{title:p.a.subTitle(t.alt_title),id:e.state.id,click:e.makeSure.bind(e),sure:e.state.sure}),"isDone"==e.state.type&&c.a.createElement("div",{className:"starScore clearfix"},e.state.score.map(function(t,n){return c.a.createElement(m.a,{key:n,star:t,scoring:e.score.bind(e),name:n})})),c.a.createElement(h.a,(r={babel:e.state.origin,babelChange:e.babelChange.bind(e),textChange:e.textChange.bind(e),text:e.state.textarea,inputChange:e.change.bind(e),size:e.state.size,adding:e.adding.bind(e),inputRef:function(t){return e.inputRef=t}},a(r,"adding",e.adding.bind(e)),a(r,"add",e.state.add),r)))}))}},{key:"componentWillMount",value:function(){var e=this;console.log(this.state.id),f.a.ajax({dataType:"jsonp",type:"post",url:"https://api.douban.com/v2/movie/"+this.state.id,success:function(t){var n=t.tags;n.map(function(e){e.choose=!1}),e.setState(function(e,a){return{data:e.data.concat(t),origin:n}})}})}},{key:"makeSure",value:function(){var e=this;if(0==this.state.textarea.length&&0==this.state.babels.length)this.setState({message:"\u77ed\u8bc4\u6216\u6253\u6807\u7b7e\u4e0d\u80fd\u4e3a\u7a7a",toast:!0,danger:!0},function(){setTimeout(function(){e.setState({toast:!1})},5e3)});else{var t=localStorage.getItem("b_"+this.state.id)||[],n=localStorage.getItem("a_"+this.state.id)||[],a=(new Date).getTime();"isDone"==this.state.type?(n=n.concat({babels:this.state.babels,comment:this.state.textarea,time:a,score:this.state.sco}),localStorage.setItem("a_"+this.state.id,JSON.stringify(n))):"wanted"==this.state.type&&(t=t.concat({babels:this.state.babels,comment:this.state.textarea,time:a}),localStorage.setItem("b_"+this.state.id,JSON.stringify(t))),this.props.history.push("/moreDetail/"+this.state.id)}}},{key:"textChange",value:function(e){var t=this;this.setState({textarea:e.target.value},function(){t.judgSure()})}},{key:"babelChange",value:function(e){var t=this,n=this.state.origin,a=this.state.babels,r=a.indexOf(e.target.value);-1==r?(a=a.concat(e.target.value),n.map(function(t){t.name==e.target.value&&(t.choose=!0)})):(a.splice(r,1),n.map(function(t){t.name==e.target.value&&(t.choose=!1)})),this.setState({origin:n,babels:a},function(){t.judgSure()})}},{key:"change",value:function(e){this.setState({size:2*e.currentTarget.value.length})}},{key:"adding",value:function(){var e=this;if(1==this.state.newOrAdd){var t=[{foucs:!0,choose:!0}];this.setState({add:t,newOrAdd:!1},function(){console.log(e.state.add)})}else{var n=this.state.origin;n=n.concat({choose:!0,name:this.inputRef.value});var a=this.state.babels;a=a.concat(this.inputRif.value),this.setState({origin:n,add:[],newOrAdd:!0,sure:!0,babels:a})}}},{key:"judgSure",value:function(){0==this.state.textarea.length&&0==this.state.babels.length?this.setState({sure:!1}):this.setState({sure:!0})}},{key:"score",value:function(e){var t=f()(e.target).attr("name"),n=this.state.score;n.map(function(e,a){n[a]=t>=a}),this.setState({score:n,sco:2*t})}}]),t}(s.Component);t.default=v},246:function(e,t,n){var a,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r=typeof a;if("string"===r||"number"===r)e.push(a);else if(Array.isArray(a))e.push(n.apply(null,a));else if("object"===r)for(var i in a)o.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?e.exports=n:(a=[],void 0!==(r=function(){return n}.apply(t,a))&&(e.exports=r))}()},247:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(5),s=n.n(i),c=n(246),u=n.n(c),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return o(t,e),l(t,[{key:"render",value:function(){return s.a.createElement("div",{className:u()({toast:!0,toastDanger:this.props.danger,toastOk:!this.props.danger})},this.props.mes)}}]),t}(i.Component);t.a=f},248:function(e,t,n){"use strict";var a=function(e){return e.substr(0,88)+"..."},r=function(e){console.log(e);var t=e.indexOf("/");return e.substr(0,t)},o=function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e),a=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),i=n.getHours(),s=n.getMinutes(),c=n.getSeconds();return a+"-"+t(r)+"-"+t(o)+" "+t(i)+":"+t(s)+":"+t(c)};t.a={substr:a,subTitle:r,formatTime:o}},251:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(5),c=n.n(s),u=n(246),l=n.n(u),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={choose:!1,origin:[]},n}return i(t,e),f(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"babel"},c.a.createElement("div",{className:"be"},c.a.createElement("p",null,"\u6253\u6807\u7b7e"),c.a.createElement("ul",{className:"clearfix"},this.props.babel.map(function(t,n){return c.a.createElement("li",{className:l()({fl:!0,input:!0}),onClick:e.props.babelChange,key:n},c.a.createElement("input",{value:t.name,type:"text",className:l()({choose:t.choose,unchoose:!t.choose}),size:2*t.name.length,disabled:!0}))}),this.props.add.map(function(t,n){return c.a.createElement("li",{className:"fl input",key:n},c.a.createElement("input",a({autoFocus:"autofocus",ref:"input",className:"choose",type:"text",size:e.props.size,onChange:e.props.inputChange},"ref",e.props.inputRef)))}),c.a.createElement("li",{className:"fl unchoose",onClick:this.props.adding},"+"))),c.a.createElement("div",{className:"com"},c.a.createElement("p",null,"\u5199\u77ed\u8bc4"),c.a.createElement("textarea",{value:this.props.text,onChange:this.props.textChange})))}}]),t}(s.Component);t.a=p},253:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(5),s=n.n(i),c=n(246),u=n.n(c),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={empty:!0},n}return o(t,e),l(t,[{key:"render",value:function(){return s.a.createElement("span",{className:u()({empty:!this.props.star,full:this.props.star}),name:this.props.name,onClick:this.props.scoring})}}]),t}(i.Component);t.a=f},254:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(5),s=n.n(i),c=n(27),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return o(t,e),u(t,[{key:"render",value:function(){var e=null;return e=this.props.sure?s.a.createElement("span",{onClick:this.props.click,id:"sure"},"\u786e\u5b9a"):s.a.createElement("span",{onClick:this.props.click},"\u786e\u5b9a"),s.a.createElement("div",{className:"titles"},s.a.createElement(c.d,{to:"/moreDetail/"+this.props.id},"\u53d6\u6d88"),s.a.createElement("span",null,this.props.title),e)}},{key:"componentWillMount",value:function(){console.log(this.props.title),console.log(this.props.id)}}]),t}(i.Component);t.a=l}});
//# sourceMappingURL=0.7ff93a3d.js.map